---
import { ViewTransitions } from 'astro:transitions';
import { Footer } from "../../components/Footer";
import type { langData } from "../../components/Hero";
import { ProjectsPage } from "../../components/ProjectsPage";
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const title: langData = {
  br: ["Projetos"],
  en: ["Projects"],
};

export function getStaticPaths() {
  return [{ params: { lang: "br" } }, { params: { lang: "en" } }];
}

let { lang } = Astro.params;

typeof lang === "string" ? null : (lang = "br");

const projects = await getCollection("projects", ({id})=>{
  return id.startsWith(lang+'/')
});

const basePath = Astro.url.origin + "/astro-folio";
---
<head>
  <ViewTransitions />
</head>
<Layout title="Daniel Folio" lang={lang}>
  <div class="bg-pallete4a min-h-full text-center text-white pt-4 pb-8">
    <!-- <h1
      class="z-20 text-pallete4c opacity-10 sm:text-8xl -rotate-90 translate-x-[-40%] translate-y-[150%] sm:transform-none translate text-4xl uppercase fixed sm:-top-2 font-bold px-2 font-fira"
    >
      {title[lang]}
    </h1> -->
    <ProjectsPage basePath={basePath} content={projects} />
    <Footer lang={lang} />
  </div>
</Layout>
